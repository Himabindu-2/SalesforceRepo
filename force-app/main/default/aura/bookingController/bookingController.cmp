<aura:component implements="force:appHostable" controller="booking">
<aura:handler name="init" value="{! this }" action="{! c.doInit }"/>

<!-- this is to refresh the list once the record is saved! -->
<aura:handler event="force:showToast" action="{! c.doInit }" />

<aura:attribute name="bookingsData" type="Booking__c[]" />
<aura:attribute name="newRec" type="boolean" default="false" />
<aura:attribute name="showList" type="boolean" default="true" />

<aura:if isTrue="{!v.showList}">
<lightning:card title="Booking List">
<aura:set attribute="actions">
<lightning:button label="Create Booking" onclick="{! c.handleCreate }" />
</aura:set>
<p class="slds-p-horizontal_small">
<table>
<tr>
<th>Edit</th>
<th>Contact Name</th>
<th>Name</th>
<th>Email</th>
<th>Date of Hire</th>
<th>Car Name</th>
<th>Actual return date</th>
</tr>
<aura:iteration items="{! v.bookingsData }" var="item">
<tr>

<td>
<a data-record="{! item.Id }" onclick="{! c.handleEdit }">edit</a>
</td>

<td>
{! item.CONTACTS_Name__c }
</td>
<td>
{! item.Name }
</td>
<td>
{! item. Email_confirmation__c }
</td>
<td>
{! item. Date_Of_Hire__c }
</td>
<td>
{! item. Car_Name__c }
</td>
<td>
{! item. Actual_return_date__c }
</td>
</tr>
</aura:iteration>
</table>
</p>

</lightning:card>
</aura:if>

<!-- Creating Booking-->

<aura:if isTrue="{!v.newRec}">
<lightning:card title="New Booking" class="slds-var-m-around_xx-large slds-var-p-around_xx-large">
<lightning:recordEditForm
onsuccess="{!c.handleShowList}"
objectApiName="Booking__c">
<!-- the messages component is for error messages -->
<lightning:messages />

<lightning:inputField fieldName="CONTACTS_Name__c" />
<lightning:inputField fieldName="Name" />
<lightning:inputField fieldName="Email_confirmation__c" />
<lightning:inputField fieldName="Date_Of_Hire__c" />
<lightning:inputField fieldName="Car_Name__c" />
<lightning:inputField fieldName="Actual_return_date__c" />

<div class="slds-m-top_medium">
<lightning:button variant="brand" type="submit" name="save" label="Save" />
</div>
</lightning:recordEditForm>
</lightning:card>
</aura:if>


</aura:component>